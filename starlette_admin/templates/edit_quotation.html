

{% extends "layout.html" %}
{% block header %}
    <div class="d-flex justify-content-between align-items-center">
        <h1>{{ model.label }}</h1>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{{ url_for(__name__ ~ ':index') }}">{{ _("Admin") }}</a>
            </li>
            <li class="breadcrumb-item">
                <a href="{{ url_for(__name__ ~ ':list', identity=model.identity) }}">{{ model.label }}</a>
            </li>
            <li class="breadcrumb-item active">{{ _("Create") }}</li>
        </ol>
    </div>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <form action="{{ request.url | safe }}" method="POST" enctype="multipart/form-data">
                        <div class="card-header">
                            <div class="container-fluid">

                                <div class="d-flex justify-content-between align-items-center">


                                    {%if obj %}

                                    <h2>Details Quotation: {{obj['QuotationNumber']}}</h2>
                            {% endif %}


                                </div>

                            </div>
                        </div>




                        <div class="card-body border-bottom py-3">
                            {% block create_form %}

                                    {%if update %}
                                    <h3 class="card-title" style="color: green;">{{update}}</h3>

                            {% endif %}

                                    {%if update_error %}
                                    <h3 class="card-title" style="color: red;">{{update_error}}</h3>
                            {% endif %}

                                    {%if update_error_list %}
                                    {% for er in update_error_list %}
                                    <h3 class="card-title" style="color: red;">{{er}}</h3>
                                {% endfor %}
                            {% endif %}


                            {% endblock %}
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>


<form action="{{ url_for(__name__ ~ ':edit_quotation', identity=model.identity) }}?SourceDB={{ obj['SourceDB'] }}&QuotationNumber={{ obj['QuotationNumber'] }}" method="GET" enctype="multipart/form-data">

<div class="row">

            {% for o in obj %}

{% if obj[o] != None and o != "QuotationID" %}

            <div class="col-3">
                    <div class="mb-3">

                <h3>{{o}}</h3>
                <h5>{{obj[o]}}</h5>

                    </div>
                    </div>
            {% endif %}

            {% endfor %}
<p></p>

{% if obj_edit %}
<hr style="border-width: 4px;">

<h4>{{obj_edit['QuotationsDetails_ProductDescription']}}</h4>
<h5>SKU: {{obj_edit['QuotationsDetails_ProductSKU']}}</h5>


    {% for field in model.get_fields_list(request, 'CREATE' | ra) %}
{% if field.identity2 == "pricequotation"%}
            <div class="col-3">
                    <div class="mb-3">
                        {% with action=('CREATE'| ra), data=(None if not obj else obj_edit['UnitPrice']), error=errors.get(field.name, None) if errors else None %}
                            {% include field.label_template %}
                            {% include field.form_template %}
                        {% endwith %}
                    </div>
                    </div>
                                {% endif %}

{% if field.identity2 == "qtyquotation"%}
            <div class="col-3">
                    <div class="mb-3">
                        {% with action=('CREATE'| ra), data=(None if not obj else obj_edit['Qty']), error=errors.get(field.name, None) if errors else None %}
                            {% include field.label_template %}
                            {% include field.form_template %}
                        {% endwith %}
                    </div>
                    </div>
                                {% endif %}


            {% endfor %}

<p></p>
<p></p>
<p></p>

            <div class="col-3">
                    <div class="mb-3">


<a href="{{ url_for(__name__ ~ ':edit_quotation', identity=model.identity) }}?SourceDB={{ obj['SourceDB'] }}&LineID={{ obj_edit['LineID'] }}&status=edit_details">
<button class="btn btn-success">{{ _("Update Item") }}</button></a>




                    </div>
                    </div>

<hr>
                                {% endif %}

                    </form>



<form action="{{ url_for(__name__ ~ ':update_add_quotation', identity=model.identity) }}?DBname={{ obj['SourceDB'] }}&QuotationID={{ obj['QuotationID']}}&QuotationNumber={{ obj['QuotationNumber'] }}&status=update_add_quotation" method="POST" enctype="multipart/form-data">

{% if obj_add %}
<hr style="border-width: 4px;">
<h4>New Item for Quotation: {{obj['QuotationNumber']}}</h4>

<div class="row">

    {% for field in model.get_fields_list(request, 'CREATE' | ra) %}
{% if field.identity2 == "productdescriptionquotationedit"%}
            <div class="col-3">
                    <div class="mb-3">
                        {% with action=('CREATE'| ra), data=(None if not obj else obj_add['ProductDescription']), error=errors.get(field.name, None) if errors else None %}
                            {% include field.label_template %}
                            {% include field.form_template %}
                        {% endwith %}
                    </div>
                    </div>
                                {% endif %}

{% if field.identity2 == "productskuquotationedit"%}
            <div class="col-3">
                    <div class="mb-3">
                        {% with action=('CREATE'| ra), data=(None if not obj else obj_add['SKU']), error=errors.get(field.name, None) if errors else None %}
                            {% include field.label_template %}
                            {% include field.form_template %}
                        {% endwith %}
                    </div>
                    </div>
                                {% endif %}

{% if field.identity2 == "pricequotation"%}
            <div class="col-3">
                    <div class="mb-3">
                        {% with action=('CREATE'| ra), data=(None if not obj else obj_add['UnitPrice']), error=errors.get(field.name, None) if errors else None %}
                            {% include field.label_template %}
                            {% include field.form_template %}
                        {% endwith %}
                    </div>
                    </div>
                                {% endif %}

{% if field.identity2 == "qtyquotation"%}
            <div class="col-3">
                    <div class="mb-3">
                        {% with action=('CREATE'| ra), data=(None if not obj else obj_add['Qty']), error=errors.get(field.name, None) if errors else None %}
                            {% include field.label_template %}
                            {% include field.form_template %}
                        {% endwith %}
                    </div>
                    </div>
                                {% endif %}

            {% endfor %}
                    </div>


<p></p>
<p></p>
<p></p>

            <div class="col-3">
                    <div class="mb-3">





<a href="{{ url_for(__name__ ~ ':update_add_quotation', identity=model.identity) }}?DBname={{ obj['SourceDB'] }}&QuotationID={{ obj['QuotationID'] }}&QuotationNumber={{ obj['QuotationNumber'] }}&status=update_add_quotation">
<button type="submit" class="btn btn-success">{{ _("Add new Item") }}</button></a>



                    </div>
                    </div>

<hr>
                                {% endif %}

</form>


<p></p>
<p></p>
<p></p>

{% if not return_list %}

<h2>QuotationsDetails</h2>
<hr style="border-width: 4px;">

{% endif %}


                    </div>


{% if not obj_add %}

<form action="{{ url_for(__name__ ~ ':add_quotation', identity=model.identity) }}?DBname={{ obj['SourceDB'] }}&QuotationID={{ obj['QuotationID']}}&QuotationNumber={{ obj['QuotationNumber'] }}&status=add_quotation" method="POST" enctype="multipart/form-data">


<a href="{{ url_for(__name__ ~ ':add_quotation', identity=model.identity) }}?DBname={{ obj['SourceDB'] }}&QuotationID={{ obj['QuotationID'] }}&QuotationNumber={{ obj['QuotationNumber'] }}&status=add_quotation">
<button type="submit" class="btn btn-success">{{ _("Add Item") }}</button></a>

</form>
{% endif %}


{% if obj['SourceDB'] == None %}
    {% set choicedb_source_client = '' %}
{% else %}
    {% set choicedb_source_client = obj['SourceDB'] %}
{% endif %}


<div id="testerrr-value" data-value="{{ choicedb_source_client }}"></div>


{% if return_list %}
<a href="{{ url_for(__name__ ~ ':list', identity=model.identity) }}?DBname={{ obj['SourceDB'] }}&QuotationID={{ obj['QuotationID'] }}&QuotationNumber={{ obj['QuotationNumber'] }}&status=view_details">
<button class="btn btn-success">{{ _("Return to list QuotationDetails") }}</button></a>


{% endif %}


    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card">

                    <table id="dt" class="table table-vcenter text-nowrap" style="font-size: 12px;">
                        <thead>
                        <tr id="table-header">

                        </tr>

                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>


{% endblock %}
{% block head_css %}
    {{ super() }}
    {% for link in model._additional_css_links(request, "CREATE" | ra) %}
        <link rel="stylesheet" href="{{ link }}">
    {% endfor %}
    <style>
        .is-invalid .select2-selection {
            border-color: #d63939 !important;
        }
    </style>


    <link rel="stylesheet"
          href="{{ url_for(__name__ ~ ':statics', path='css/dt.min.css') }}"/>
    <link rel="stylesheet"
          href="{{ url_for(__name__ ~ ':statics', path='css/dt.checkboxes.css') }}"/>
    {% for link in model._additional_css_links(request, "LIST" | ra) %}
        <link rel="stylesheet" href="{{ link }}">
    {% endfor %}
    <style>
        div.dataTables_wrapper div.dataTables_info {
            padding-top: 0;
        }

        table.dataTable span.highlight {
            background-color: #ffff88;
            border-radius: 0.28571429rem;
        }

        table.dataTable span.column_highlight {
            background-color: #ffcc99;
            border-radius: 0.28571429rem;
        }

        table.dataTable.dtr-inline.collapsed > tbody > tr > td.dtr-control:before,
        table.dataTable.dtr-inline.collapsed > tbody > tr > th.dtr-control:before {
            background-color: #206bc4;
        }

        table.dataTable {
            margin-top: 0px !important;
            margin-bottom: 0px !important;
        }
    </style>


{% endblock %}



{% block script %}
    {{ super() }}
    {% for link in model._additional_js_links(request, "CREATE" | ra) %}
        <script type="text/javascript" src="{{ link }}"></script>
    {% endfor %}

    <script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/form.js') }}"></script>




    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/vendor/moment.min.js') }}"></script>
    {% if get_locale() != 'en' %}
        <script type="text/javascript"
                src="{{ url_for(__name__ ~ ':statics', path='i18n/momentjs/' ~ get_locale() ~ '.js') }}"></script>
    {% endif %}
    {% if 'pdf' in model.export_types %}
        <script type="text/javascript"
                src="{{ url_for(__name__ ~ ':statics', path='js/vendor/pdfmake.min.js') }}"></script>
        <script type="text/javascript"
                src="{{ url_for(__name__ ~ ':statics', path='js/vendor/vfs_fonts.js') }}"></script>
    {% endif %}
    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/vendor/dt.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/vendor/dt.checkboxes.js') }}"></script>
    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/vendor/dt.searchHighlight.js') }}"></script>
    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/utils.js') }}"></script>
    <script>var model = {{__js_model__ | tojson | safe}};</script>
    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/render_edit_quotation.js') }}"></script>
    {% if custom_render_js(request) %}
        <script type="text/javascript" src="{{ custom_render_js(request) }}"></script>
    {% endif %}
    {% for link in model._additional_js_links(request, "LIST" | ra) %}
        <script type="text/javascript" src="{{ link }}"></script>
    {% endfor %}
    <script type="text/javascript"
            src="{{ url_for(__name__ ~ ':statics', path='js/render_edit_list.js') }}"></script>


{% endblock %}







