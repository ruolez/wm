{% extends "layout.html" %}
{% block header %}

<style>
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    td,
    th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }
</style>

<div class="d-flex justify-content-between align-items-center">
    <h1>{{ model.label }}</h1>
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{{ url_for(__name__ ~ ':index') }}">{{ _("Admin") }}</a>
        </li>
        <li class="breadcrumb-item">
            <a href="{{ url_for(__name__ ~ ':list', identity=model.identity) }}">{{ model.label }}</a>
        </li>
        <li class="breadcrumb-item active">{{ _("Create") }}</li>
    </ol>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <form action="{{ request.url | safe }}" method="POST" enctype="multipart/form-data">
                    <div class="card-header">
                        <div class="container-fluid">

                            <div class="d-flex justify-content-between align-items-center">

                                <h3 class="card-title">{{ _("New %(name)s", name=model.name ) }}</h3>
                                <!-- <h3 class="card-title">Update product</h3> -->

                            </div>

                        </div>
                    </div>

                    <div class="card-body border-bottom py-3">
                        {% block create_form %}

                        {%if update %}
                        <h3 class="card-title" style="color: green;">{{update}}</h3>
                        {% endif %}

                        {%if update_error %}
                        <h3 class="card-title" style="color: red;">{{update_error}}</h3>
                        {% endif %}

                        {%if update_error_list %}
                        {% for er in update_error_list %}
                        <h3 class="card-title" style="color: red;">{{er}}</h3>
                        {% endfor %}
                        {% endif %}

                        <div class="row">
                            {% for field in model.get_fields_list(request, 'CREATE' | ra) %}

                            {% if field.identity2 == "orderslock" %}
                            <div class="col-5">
                                <div class="mb-4">
                                    {% with action=('CREATE'| ra), data=(None if not obj else obj[field.name]),
                                    error=errors.get(field.name, None) if errors else None %}
                                    {% include field.label_template %}
                                    {% include field.form_template %}
                                    {% endwith %}
                                </div>
                            </div>
                            {% endif %}


                            {% endfor %}
                        </div>


                        {%if inprogress %}

                        <table>
                            <tr>
                                <th>Quotation</th>
                                <th>Quotation Date</th>
                                <th>Sales Rep</th>
                                <th>Account Number</th>
                                <th>Packer</th>
                                <th>QTY</th>
                            </tr>

                            {% for inprog in inprogress %}
                            <!-- <h3 class="card-title" style="color: rgb(21, 6, 108);">{{inprog}}</h3> -->
                            {%if not "Total_inprogress" in inprog %}

                            <tr>
                                <td>{{inprog["Quotation"]}}</td>
                                <td>{{inprog["QuotationDate"]}}</td>
                                <td>{{inprog["SalesFirstName"]}}</td>
                                <td>{{inprog["AccountNo"]}}</td>
                                <td>{{inprog["Packer"]}}</td>
                                <td>{{inprog["QTY"]}}</td>
                            </tr>

                            {%else%}
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Total: {{inprog["Total_inprogress"]}}</td>
                            </tr>
                            {% endif %}
                            {% endfor %}

                        </table>
                        {% endif %}

                        <br>
                        <br>

                        <button type="submit" name="_update_lock" id="name=" _update_lock class="btn btn-success">{{
                            _("Update")
                            }}</button>



                        <a
                            href="{{ url_for(__name__ ~ ':productdescriptionmanual', identity=model.identity) }}?SourceDB=={{ obj['SourceDB'] }}">
                            <button type="submit" name="_productdescriptionmanual" id="_productdescriptionmanual"
                                class="btn btn-success" style="display: none;">{{
                                _("productdescriptionmanual")
                                }}</button></a>


                        <a
                            href="{{ url_for(__name__ ~ ':productskumanual', identity=model.identity) }}?SourceDB=={{ obj['SourceDB'] }}">
                            <button type="submit" name="_productskumanual" id="_productskumanual"
                                class="btn btn-success" style="display: none;">{{ _("productskumanual")
                                }}</button></a>



                    </div>


                    {% endblock %}
            </div>
            </form>
        </div>
    </div>
</div>
</div>



<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">

                <table id="dt" class="table table-vcenter text-nowrap" style="font-size: 12px;">
                    <thead>
                        <tr id="table-header">

                        </tr>

                    </thead>
                </table>
            </div>
        </div>
    </div>
</div>




{% endblock %}
{% block head_css %}
{{ super() }}
{% for link in model._additional_css_links(request, "CREATE" | ra) %}
<link rel="stylesheet" href="{{ link }}">
{% endfor %}
<style>
    .is-invalid .select2-selection {
        border-color: #d63939 !important;
    }
</style>

<link rel="stylesheet" href="{{ url_for(__name__ ~ ':statics', path='css/dt.min.css') }}" />
<link rel="stylesheet" href="{{ url_for(__name__ ~ ':statics', path='css/dt.checkboxes.css') }}" />
{% for link in model._additional_css_links(request, "LIST" | ra) %}
<link rel="stylesheet" href="{{ link }}">
{% endfor %}
<style>
    div.dataTables_wrapper div.dataTables_info {
        padding-top: 0;
    }

    table.dataTable span.highlight {
        background-color: #ffff88;
        border-radius: 0.28571429rem;
    }

    table.dataTable span.column_highlight {
        background-color: #ffcc99;
        border-radius: 0.28571429rem;
    }

    table.dataTable.dtr-inline.collapsed>tbody>tr>td.dtr-control:before,
    table.dataTable.dtr-inline.collapsed>tbody>tr>th.dtr-control:before {
        background-color: #206bc4;
    }

    table.dataTable {
        margin-top: 0px !important;
        margin-bottom: 0px !important;
    }
</style>


{% endblock %}

{% block script %}
{{ super() }}
{% for link in model._additional_js_links(request, "CREATE" | ra) %}
<script type="text/javascript" src="{{ link }}"></script>
{% endfor %}
<script>
    function myFunction() {
        alert("I am an alert box!");
    }
</script>

<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/form_manualupdate.js') }}"></script>

<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/moment.min.js') }}"></script>
{% if get_locale() != 'en' %}
<script type="text/javascript"
    src="{{ url_for(__name__ ~ ':statics', path='i18n/momentjs/' ~ get_locale() ~ '.js') }}"></script>
{% endif %}
{% if 'pdf' in model.export_types %}
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/pdfmake.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/vfs_fonts.js') }}"></script>
{% endif %}
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/dt.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/dt.checkboxes.js') }}"></script>
<script type="text/javascript"
    src="{{ url_for(__name__ ~ ':statics', path='js/vendor/dt.searchHighlight.js') }}"></script>
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/utils.js') }}"></script>
<script>var model = {{ __js_model__ | tojson | safe}};</script>
<script type="text/javascript"
    src="{{ url_for(__name__ ~ ':statics', path='js/render_manualupdate_quotation.js') }}"></script>
{% if custom_render_js(request) %}
<script type="text/javascript" src="{{ custom_render_js(request) }}"></script>
{% endif %}
{% for link in model._additional_js_links(request, "LIST" | ra) %}
<script type="text/javascript" src="{{ link }}"></script>
{% endfor %}
<script type="text/javascript"
    src="{{ url_for(__name__ ~ ':statics', path='js/render_manualupdate_list.js') }}"></script>

<script>
    $(document).ready(function () {
        $('#orderslock').focus();
    });
</script>
{% endblock %}